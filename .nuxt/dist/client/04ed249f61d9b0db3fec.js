(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1189:function(e,o,r){"use strict";r.r(o);r(65),r(40),r(33),r(54),r(50);var t=r(28),n=(r(273),r(274),r(27),r(29)),l=r(2);function m(object,e){var o=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),o.push.apply(o,r)}return o}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach((function(o){Object(t.a)(e,o,source[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(source).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(source,o))}))}return e}var f={layout:"aijinke",data:function(){var e=this;return{resetForm:{newpassword1:"",password:"",username:""},resetFormRules:{password:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newpwd:[{required:!0,validator:function(e,o,r){o?o.toString().length<6||o.toString().length>18?r(new Error("密码长度为6-18位")):r():r(new Error("请输入新密码"))},trigger:"blur"}],newpassword1:[{required:!0,validator:function(o,r,t){""===r?t(new Error("请再次输入密码")):r!==e.resetForm.newpwd?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]},usertype:null,activeName:"first",activeIndex:"1",infoForm:{type:1,id:"",name:"李媛媛",sex:"1",date1:"1985-2-2",professionName:"市场营销",code:"007",lesson:"市场营销理论",classList:[],mphone:"180222111",email:"xxxx@163.com",character:"老师",userNo:"",xyName:"",classTree:[],teacherClassList:[],className:"",schoolName:""},rulesInfo:{}}},computed:c({},Object(n.d)("user",["userInfo"])),created:function(){this.getUserDetails(),this.usertype=this.userInfo.type},methods:c({},Object(n.c)("user",["logout"]),{},Object(n.b)("user",["getUserDetail","updateUserInfo","updateStudentInfo","resetPassword"]),{getUserDetails:function(){var e=this;this.getUserDetail().then((function(o){if(console.log(o),o){e.infoForm.classTree=o.classTree[0].children,e.infoForm.teacherClassList=o.teacherClassList,e.infoForm.type=o.type;var data=o.data;e.infoForm.tid=data.tid,e.infoForm.name=data.name,e.infoForm.email=data.email,e.infoForm.date1=data.birth,e.infoForm.lesson=data.lesson,e.infoForm.professionName=data.professionName,e.infoForm.mphone=data.mphone,e.infoForm.sex=data.sex,e.infoForm.schoolName=data.schoolName,e.infoForm.userNo=data.userNo,e.infoForm.classList=data.classList,1==o.type?(e.infoForm.character="老师",e.infoForm.code=data.code,e.infoForm.xyName=data.xyName):(e.infoForm.character="学生",e.infoForm.code=data.scode,e.infoForm.xyName=data.instituteName,e.infoForm.className=data.className)}}))},toAmend:function(){var e=this;this.$refs.resetForm.validate((function(o){o&&e.resetPassword(e.resetForm).then((function(o){0==o.code&&(l.a.successMessage("密码修改成功,请重新登录！"),e.logout(),location.reload())}))}))},submitUserInfo:function(e){var o=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"老师"==o.infoForm.character?o.updateUserInfo(o.infoForm).then((function(e){0==e.code&&l.a.successMessage("修改成功！")})):o.updateStudentInfo(o.infoForm).then((function(e){0==e.code&&l.a.successMessage("修改成功！")}))}))}})},d=r(13),component=Object(d.a)(f,(function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"uc-center-wrap"},[r("div",{staticClass:"main"},[r("el-container",[r("el-aside",{attrs:{width:"260px"}},[r("div",{staticClass:"aside-panel"},[r("div",{staticClass:"aside-avatar"},[2==e.infoForm.sex&&1==e.usertype?r("el-image",{attrs:{src:"/image/avatar/teacher-female-2.png"}}):e._e(),e._v(" "),1==e.infoForm.sex&&1==e.usertype?r("el-image",{attrs:{src:"/image/avatar/teacher-male-2.png"}}):e._e(),e._v(" "),2==e.usertype?r("el-image",{attrs:{src:"/image/avatar/student2.png"}}):e._e()],1),e._v(" "),r("ul",{staticClass:"uc-grid"},[r("li",[r("span",[e._v("姓名：")]),e._v("\n              "+e._s(e.infoForm.name)+"\n            ")]),e._v(" "),r("li",[r("span",[e._v("角色：")]),e._v("\n              "+e._s(e.infoForm.character)+"\n            ")]),e._v(" "),r("li",[r("span",[e._v("账号：")]),e._v("\n              "+e._s(e.infoForm.userNo)+"\n            ")]),e._v(" "),r("li",[r("span",[e._v("学校名称：")]),e._v("\n              "+e._s(e.infoForm.schoolName)+"\n            ")]),e._v(" "),r("li",[r("span",[e._v("教学单位：")]),e._v("\n              "+e._s(e.infoForm.xyName)+"\n            ")])])])]),e._v(" "),r("el-main",[r("div",{staticClass:"col-panel"},[r("div",{staticClass:"main-panel form-panel"},[r("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(o){e.activeName=o},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"账户信息",name:"first"}},[r("el-form",{ref:"infoForm",staticClass:"panelForm",attrs:{model:e.infoForm,rules:e.rulesInfo,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{disabled:""},model:{value:e.infoForm.name,callback:function(o){e.$set(e.infoForm,"name",o)},expression:"infoForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{attrs:{disabled:""},model:{value:e.infoForm.sex,callback:function(o){e.$set(e.infoForm,"sex",o)},expression:"infoForm.sex"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"生日",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date1"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.infoForm.date1,callback:function(o){e.$set(e.infoForm,"date1",o)},expression:"infoForm.date1"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:1==e.infoForm.type?"授课专业":"所属专业",prop:"professionName"}},[r("el-input",{model:{value:e.infoForm.professionName,callback:function(o){e.$set(e.infoForm,"professionName",o)},expression:"infoForm.professionName"}})],1),e._v(" "),1==e.infoForm.type?r("el-form-item",{attrs:{label:"授课课程",prop:"lesson"}},[r("el-input",{model:{value:e.infoForm.lesson,callback:function(o){e.$set(e.infoForm,"lesson",o)},expression:"infoForm.lesson"}})],1):e._e(),e._v(" "),1==e.infoForm.type?r("el-form-item",{attrs:{label:"授课班级",prop:"classlist"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.infoForm.classTree,props:{value:"id",multiple:!0},"show-all-levels":!1,clearable:""},model:{value:e.infoForm.teacherClassList,callback:function(o){e.$set(e.infoForm,"teacherClassList",o)},expression:"infoForm.teacherClassList"}})],1):r("el-form-item",{attrs:{label:"所属班级",prop:"className"}},[r("el-input",{attrs:{disabled:""},model:{value:e.infoForm.className,callback:function(o){e.$set(e.infoForm,"className",o)},expression:"infoForm.className"}})],1),e._v(" "),r("el-form-item",{attrs:{label:1==e.usertype?"教师工号":"学生学号",prop:"code"}},[r("el-input",{attrs:{disabled:""},model:{value:e.infoForm.code,callback:function(o){e.$set(e.infoForm,"code",o)},expression:"infoForm.code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"mphone"}},[r("el-input",{attrs:{disabled:""},model:{value:e.infoForm.mphone,callback:function(o){e.$set(e.infoForm,"mphone",o)},expression:"infoForm.mphone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{disabled:""},model:{value:e.infoForm.email,callback:function(o){e.$set(e.infoForm,"email",o)},expression:"infoForm.email"}})],1),e._v(" "),r("div",{staticClass:"form-footer"},[r("el-button",{attrs:{type:"success"},on:{click:function(o){return e.submitUserInfo("infoForm")}}},[e._v("保存")])],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{label:"修改密码",name:"second"}},[r("el-form",{ref:"resetForm",staticClass:"passForm",attrs:{model:e.resetForm,rules:e.resetFormRules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"旧密码：",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.password,callback:function(o){e.$set(e.resetForm,"password",o)},expression:"resetForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码：",prop:"newpwd"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.newpwd,callback:function(o){e.$set(e.resetForm,"newpwd",o)},expression:"resetForm.newpwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码：",prop:"newpassword1"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.newpassword1,callback:function(o){e.$set(e.resetForm,"newpassword1",o)},expression:"resetForm.newpassword1"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),e.toAmend(o)}}},[e._v("确认修改")])],1)],1)],1)],1)],1)])])],1)],1)])}),[],!1,null,null,null);o.default=component.exports}}]);