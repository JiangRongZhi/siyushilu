exports.ids=[37],exports.modules={345:function(e,o,t){"use strict";t.r(o);var r=t(4),l=t(0),n={layout:"aijinke",data(){return{resetForm:{newpassword1:"",password:"",username:""},resetFormRules:{password:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newpwd:[{required:!0,validator:(e,o,t)=>{o?o.toString().length<6||o.toString().length>18?t(new Error("密码长度为6-18位")):t():t(new Error("请输入新密码"))},trigger:"blur"}],newpassword1:[{required:!0,validator:(e,o,t)=>{""===o?t(new Error("请再次输入密码")):o!==this.resetForm.newpwd?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]},usertype:null,activeName:"first",activeIndex:"1",infoForm:{type:1,id:"",name:"李媛媛",sex:"1",date1:"1985-2-2",professionName:"市场营销",code:"007",lesson:"市场营销理论",classList:[],mphone:"180222111",email:"xxxx@163.com",character:"老师",userNo:"",xyName:"",classTree:[],teacherClassList:[],className:"",schoolName:""},rulesInfo:{}}},computed:{...Object(r.mapState)("user",["userInfo"])},created(){this.getUserDetails(),this.usertype=this.userInfo.type},methods:{...Object(r.mapMutations)("user",["logout"]),...Object(r.mapActions)("user",["getUserDetail","updateUserInfo","updateStudentInfo","resetPassword"]),getUserDetails(){this.getUserDetail().then(e=>{if(console.log(e),e){this.infoForm.classTree=e.classTree[0].children,this.infoForm.teacherClassList=e.teacherClassList,this.infoForm.type=e.type;const data=e.data;this.infoForm.tid=data.tid,this.infoForm.name=data.name,this.infoForm.email=data.email,this.infoForm.date1=data.birth,this.infoForm.lesson=data.lesson,this.infoForm.professionName=data.professionName,this.infoForm.mphone=data.mphone,this.infoForm.sex=data.sex,this.infoForm.schoolName=data.schoolName,this.infoForm.userNo=data.userNo,this.infoForm.classList=data.classList,1==e.type?(this.infoForm.character="老师",this.infoForm.code=data.code,this.infoForm.xyName=data.xyName):(this.infoForm.character="学生",this.infoForm.code=data.scode,this.infoForm.xyName=data.instituteName,this.infoForm.className=data.className)}})},toAmend(){this.$refs.resetForm.validate(e=>{e&&this.resetPassword(this.resetForm).then(e=>{0==e.code&&(l.a.successMessage("密码修改成功,请重新登录！"),this.logout(),location.reload())})})},submitUserInfo(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;"老师"==this.infoForm.character?this.updateUserInfo(this.infoForm).then(e=>{0==e.code&&l.a.successMessage("修改成功！")}):this.updateStudentInfo(this.infoForm).then(e=>{0==e.code&&l.a.successMessage("修改成功！")})})}}},m=t(3),component=Object(m.a)(n,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"uc-center-wrap"},[e._ssrNode('<div class="main">',"</div>",[t("el-container",[t("el-aside",{attrs:{width:"260px"}},[t("div",{staticClass:"aside-panel"},[t("div",{staticClass:"aside-avatar"},[2==e.infoForm.sex&&1==e.usertype?t("el-image",{attrs:{src:"/image/avatar/teacher-female-2.png"}}):e._e(),e._v(" "),1==e.infoForm.sex&&1==e.usertype?t("el-image",{attrs:{src:"/image/avatar/teacher-male-2.png"}}):e._e(),e._v(" "),2==e.usertype?t("el-image",{attrs:{src:"/image/avatar/student2.png"}}):e._e()],1),e._v(" "),t("ul",{staticClass:"uc-grid"},[t("li",[t("span",[e._v("姓名：")]),e._v("\n              "+e._s(e.infoForm.name)+"\n            ")]),e._v(" "),t("li",[t("span",[e._v("角色：")]),e._v("\n              "+e._s(e.infoForm.character)+"\n            ")]),e._v(" "),t("li",[t("span",[e._v("账号：")]),e._v("\n              "+e._s(e.infoForm.userNo)+"\n            ")]),e._v(" "),t("li",[t("span",[e._v("学校名称：")]),e._v("\n              "+e._s(e.infoForm.schoolName)+"\n            ")]),e._v(" "),t("li",[t("span",[e._v("教学单位：")]),e._v("\n              "+e._s(e.infoForm.xyName)+"\n            ")])])])]),e._v(" "),t("el-main",[t("div",{staticClass:"col-panel"},[t("div",{staticClass:"main-panel form-panel"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(o){e.activeName=o},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"账户信息",name:"first"}},[t("el-form",{ref:"infoForm",staticClass:"panelForm",attrs:{model:e.infoForm,rules:e.rulesInfo,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.infoForm.name,callback:function(o){e.$set(e.infoForm,"name",o)},expression:"infoForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-radio-group",{attrs:{disabled:""},model:{value:e.infoForm.sex,callback:function(o){e.$set(e.infoForm,"sex",o)},expression:"infoForm.sex"}},[t("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"生日",required:""}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"date1"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.infoForm.date1,callback:function(o){e.$set(e.infoForm,"date1",o)},expression:"infoForm.date1"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:1==e.infoForm.type?"授课专业":"所属专业",prop:"professionName"}},[t("el-input",{model:{value:e.infoForm.professionName,callback:function(o){e.$set(e.infoForm,"professionName",o)},expression:"infoForm.professionName"}})],1),e._v(" "),1==e.infoForm.type?t("el-form-item",{attrs:{label:"授课课程",prop:"lesson"}},[t("el-input",{model:{value:e.infoForm.lesson,callback:function(o){e.$set(e.infoForm,"lesson",o)},expression:"infoForm.lesson"}})],1):e._e(),e._v(" "),1==e.infoForm.type?t("el-form-item",{attrs:{label:"授课班级",prop:"classlist"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.infoForm.classTree,props:{value:"id",multiple:!0},"show-all-levels":!1,clearable:""},model:{value:e.infoForm.teacherClassList,callback:function(o){e.$set(e.infoForm,"teacherClassList",o)},expression:"infoForm.teacherClassList"}})],1):t("el-form-item",{attrs:{label:"所属班级",prop:"className"}},[t("el-input",{attrs:{disabled:""},model:{value:e.infoForm.className,callback:function(o){e.$set(e.infoForm,"className",o)},expression:"infoForm.className"}})],1),e._v(" "),t("el-form-item",{attrs:{label:1==e.usertype?"教师工号":"学生学号",prop:"code"}},[t("el-input",{attrs:{disabled:""},model:{value:e.infoForm.code,callback:function(o){e.$set(e.infoForm,"code",o)},expression:"infoForm.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"mphone"}},[t("el-input",{attrs:{disabled:""},model:{value:e.infoForm.mphone,callback:function(o){e.$set(e.infoForm,"mphone",o)},expression:"infoForm.mphone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{disabled:""},model:{value:e.infoForm.email,callback:function(o){e.$set(e.infoForm,"email",o)},expression:"infoForm.email"}})],1),e._v(" "),t("div",{staticClass:"form-footer"},[t("el-button",{attrs:{type:"success"},on:{click:function(o){return e.submitUserInfo("infoForm")}}},[e._v("保存")])],1)],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"修改密码",name:"second"}},[t("el-form",{ref:"resetForm",staticClass:"passForm",attrs:{model:e.resetForm,rules:e.resetFormRules,"label-width":"200px"}},[t("el-form-item",{attrs:{label:"旧密码：",prop:"password"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.password,callback:function(o){e.$set(e.resetForm,"password",o)},expression:"resetForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码：",prop:"newpwd"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.newpwd,callback:function(o){e.$set(e.resetForm,"newpwd",o)},expression:"resetForm.newpwd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码：",prop:"newpassword1"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.resetForm.newpassword1,callback:function(o){e.$set(e.resetForm,"newpassword1",o)},expression:"resetForm.newpassword1"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),e.toAmend(o)}}},[e._v("确认修改")])],1)],1)],1)],1)],1)])])],1)],1)])}),[],!1,null,null,"4cd8a42d");o.default=component.exports}};
//# sourceMappingURL=5719165599b363d9ae07.js.map